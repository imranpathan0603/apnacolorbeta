<!-- auth.component.html -->

<!-- Show auth screen only if NOT logged in -->
<div *ngIf="!isAdminLoggedIn && !isCustomerLoggedIn" class="auth-page">

  <!-- LOGIN BLOCK -->
  <div *ngIf="status && flag" class="auth-card">
    <!-- Messages -->
    <div *ngIf="successMessage" class="alert alert-success">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <h2 class="auth-title">Login</h2>

    <form (ngSubmit)="login()" #loginForm="ngForm">
      <input
        [(ngModel)]="username"
        name="username"
        type="text"
        placeholder="Username"
        class="form-input"
        required
      />

      <input
        [(ngModel)]="password"
        name="password"
        type="password"
        placeholder="Password"
        class="form-input"
        required
      />

      <button type="submit" class="primary-btn">Login</button>

      <button type="button" (click)="Show()" class="secondary-btn">
        Go to Signup
      </button>

      <p class="message">{{ message }}</p>
    </form>
  </div>

  <!-- SIGNUP BLOCK -->
  <div *ngIf="!status" class="auth-card">
    <div *ngIf="successMessage" class="alert alert-success">
      {{ successMessage }}
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <h2 class="auth-title">User Registration</h2>

    <form (ngSubmit)="signup()" #signupForm="ngForm">
      <input
        type="text"
        class="form-input"
        placeholder="Username"
        [(ngModel)]="user.username"
        name="username"
        required
      />

      <input
        type="text"
        class="form-input"
        placeholder="Contact Number"
        [(ngModel)]="user.contactNo"
        name="contactNo"
        required
      />

      <input
        type="email"
        class="form-input"
        placeholder="Email"
        [(ngModel)]="user.email"
        name="email"
        required
      />

      <input
        type="text"
        class="form-input"
        placeholder="Address"
        [(ngModel)]="user.address"
        name="address"
        required
      />

      <select
        class="form-input"
        [(ngModel)]="user.role"
        name="role"
        required
      >
        <option value="" disabled>Select Role</option>
        <option value="ADMIN">ADMIN</option>
        <option value="CUSTOMER">CUSTOMER</option>
      </select>

      <input
        type="password"
        class="form-input"
        placeholder="Password"
        [(ngModel)]="user.password"
        name="password"
        required
      />

      <button type="submit" class="primary-btn">Register</button>

      <button type="button" (click)="Show()" class="secondary-btn">
        Go to Login
      </button>
    </form>
  </div>
</div>

<!-- When logged in, show routed content -->
<div *ngIf="isAdminLoggedIn || isCustomerLoggedIn">
  <router-outlet></router-outlet>
</div>
